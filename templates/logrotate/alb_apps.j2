# {{ ansible_managed }}
#
# FILE:             /etc/logrotate.d/alb_apps
#
# TODO: implement logrotate for ALB Apps (fititnt, 2019-11-07 21:49 BRT)
# @see https://linux.die.net/man/8/logrotate
# @see https://manpages.debian.org/jessie/logrotate/logrotate.8.en.html

# IMPORTANT NOTE: this logrotate file still need testing (fititnt, 2019-11-07 22:04 BRT) 

/var/log/app/*/access.log /var/log/app/*/error.log {
    monthly
    rotate 36
    maxsize 10M
    dateext
    missingok
    compress
    delaycompress
    missingok
    sharedscripts
    postrotate
        [ ! -f {{ alb_openresty_pidfile }} ] || kill -USR1 `cat {{ alb_openresty_pidfile }}`
    endscript
}