---

# TODO: remove ignore_errors: true from this task, was enable just because
#       of some test servers where getting errors and I did not investigate
#       furter (fititnt, 201-12-08 08:17 BRT)
- name: "bootstrap | alb-standard | host-changes.yml: hostname"
  hostname:
    name: "{{ alb_node_hostname }}"
    use: "{{ alb_internal_bootstrap_alb_standard_hostname_use | default(omit) }}"
  ignore_errors: true
  when:
    - (alb_node_hostname is defined) and (alb_node_hostname | length > 2)

# TASK [ap-application-load-balancer : bootstrap | alb-standard | main.yml: hostname] ************************************************************************************************************************************************
# changed: [ap_golf]
# changed: [ap_delta]
# fatal: [ap_echo]: FAILED! => {"changed": false, "msg": "Command failed rc=1, out=, err=Could not set property: Invalid hostname 'ap_echo'\n"}
# changed: [ap_foxtrot]
# changed: [rocha_anortosito]
# fatal: [rocha_basalto]: FAILED! => {"changed": false, "msg": "hostname module cannot be used on platform Linux (Opensuse-leap)"}

- name: "bootstrap | alb-standard | host-changes.yml: timezone"
  timezone:
    name: UTC
  when:
    - (alb_node_timezone is defined) and (alb_node_timezone | length > 2)
    - ansible_facts['date_time']['tz'] != alb_node_timezone