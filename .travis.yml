---
# dist: bionic
language: python
services:
  - docker

before_install:
  - sudo apt-get -qq update

# molecule test
# MOLECULE_DISTRO=ubuntu:bionic molecule test
# MOLECULE_DISTRO=opensuse/leap:latest molecule test
#
# Errors 'fatal: [instance]: FAILED! => {"changed": false, "cmd": "/usr/bin/systemctl", "msg": "Failed to connect to bus: No such file or directory", "rc": 1, "stderr": "Failed to connect to bus: No such file or directory\n", '...
# The conteiners very likely did not contain the systemd

env:
  # global:
  #   - ROLE_NAME: my_role_name
  matrix:
    - MOLECULE_DISTRO: ubuntu:bionic
    - MOLECULE_DISTRO: debian:buster
    - MOLECULE_DISTRO: centos:7
    - MOLECULE_DISTRO: centos:8
    - MOLECULE_DISTRO: archlinux:latest
    - MOLECULE_DISTRO: opensuse/leap:latest

    ## - MOLECULE_DISTRO: freebsd:latest
    # FreeBSD support on travis is not trivial
    # @see https://github.com/travis-ci/travis-ci/issues/1818
    # Humm... someone installed FreeBSD inside Ubuntu and
    # then released as image https://github.com/weitjong/dockerized/blob/master/urho3d/freebsd/Dockerfile
    # And this one was from Alpine
    # https://github.com/ustclug/ustcmirror-images/tree/master/freebsd-ports

install:
  - pip install testinfra molecule docker

# before_script:
#   - cd ../
#   - mv ap-application-load-balancer fititnt.ap-application-load-balancer
#   - cd fititnt.ap-application-load-balancer

script:
  - molecule test

# notifications:
#   webhooks: https://galaxy.ansible.com/api/v1/notifications/